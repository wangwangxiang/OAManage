
<head>
<link rel="stylesheet" type="text/css" href="~/H-Ui/static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="~/H-Ui/static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="~/H-Ui/lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css" href="~/H-Ui/static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="~/H-Ui/static/h-ui.admin/css/style.css" />
    <link rel="Bookmark" href="/favicon.ico">
<link rel="Shortcut Icon" href="/favicon.ico">
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<link style="" id="layui_layer_skinlayercss" href="file:~/H-Ui/static/lib/layer/2.4/skin/layer.css" rel="stylesheet">
    <script src="~/JS/jquery-1.9.1.min.js"></script>
    <script src="~/JS/layer/layer.js"></script>
</head>

<body>

<nav class="breadcrumb"><i class="Hui-iconfont"></i> 首页 <span class="c-gray en">&gt;</span> 员工入职 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新"><i class="Hui-iconfont"></i></a></nav>

<form class="form form-horizontal" id="form-article-add">
  

		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>登录名：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input class="input-text" value="" placeholder="登录名" id="LoginName" name="LoginName" type="text">
			</div>
		</div>

    	<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>真实姓名：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input class="input-text" value="" placeholder="真实姓名" id="UserName" name="UserName" type="text">
			</div>
		</div>
   

     <div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>年龄：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input class="input-text" value="" placeholder="年龄" id="UserAge" name="UserAge" type="text">
			</div>
		</div>
            
         <div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>地址：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input class="input-text" value="" placeholder="联系地址" id="UserAddress" name="UserAddress" type="text">
			</div>
		</div>

    	<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>密码：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input class="input-text" value="" placeholder="密码" id="UserPwd" name="UserPwd" type="text">
			</div>
		</div>

    	<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>性别：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<label class="form-label col-xs-4 col-sm-2"><input type="radio" name="UserSex"  value="0"/>男</label><label class="form-label col-xs-4 col-sm-2"><input type="radio" name="UserSex" value="1" />女</label>
			</div>
		</div>
		
    <div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>电话：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input class="input-text" value="" placeholder="电话" id="UserTel" name="UserTel" type="text">
			</div>
		</div>
    <div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>邮箱：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input class="input-text" value="" placeholder="邮箱" id="UserEmail" name="UserEmail" type="text">
			</div>
		</div>

    <div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>学历：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input class="input-text" value="" placeholder="学历" id="XueLi" name="XueLi" type="text">
			</div>
		</div>

    <br />

      <div style="margin-left:11%;">
          <label> <span class="c-red">*</span>部门： </label>
          <span class="select-box inline">
		<select class="select" id="BuMenId" name="BuMenId">
			
			
		</select>
		</span>

           <label> <span class="c-red">*</span>职位： </label>

           <span class="select-box inline">
		<select class="select" id="ZhiWeiId" name="ZhiWeiId">
			
			
		</select>
		</span>

          
           <label> <span class="c-red">*</span>工作状态： </label>

           <span class="select-box inline">
		<select class="select" id="OccupationalStatus" name="OccupationalStatus">
			<option value="-1">请选择</option>
            <option value="0">在职</option>
            <option value="1">离职</option>
            <option value="2">实习</option>
			
		</select>
		</span>

       
      </div>
		<br />
             <div style="margin-left:46%;">
 
                    <a class="btn btn-primary radius"href="#" id="updateBtn"><i class="Hui-iconfont"></i> 入职</a>
                
                
      
   </div>
		
	
	</form>

    <script>

        $(function () {

            $("#updateBtn").click(function () {

                //地址
                var userAddress = $("#UserAddress").val();

                //年龄
                var userAge = $("#UserAge").val();

                //登录名
                var loginName = $("#LoginName").val();

                //真实姓名

                var realName = $("#UserName").val();

                //编号

                var userNum = $("#UserNum").val();

                //密码
                var loginPwd = $("#UserPwd").val();

                //密码

                var userSex = $("#UserSex").val();



                if ($("input[type='radio']:checked") == true) {
                    $("#userSex").val();
                }

                //电话

                var userTel = $("#UserTel").val();

                //邮箱

                var userEmail = $("#UserEmail").val();

                //学历

                var userXue = $("#XueLi").val();

                //修改验证

                if (loginName == "") {
                    layer.open({

                        title: '温馨提示',
                        content: '登录名不能为空',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();

                        }

                    });
                    return;
                }

                if (realName == "") {
                    layer.open({

                        title: '温馨提示',
                        content: '真实姓名不能为空！',
                        btn: ['确定'],
                        yes: function () {
                            layer.closeAll();

                        }

                    });
                }

                if (userAge == "")
                {
                    layer.open({

                        title: '温馨提示',
                        content: '年龄不能空!',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();
                        }

                    });
                    return;
                }

                if (userAddress == "")
                {
                    layer.open({

                        title: '温馨提示',
                        content: '地址不能为空!',
                        yes: function () {

                            layer.closeAll();

                        }

                    });
                    return;
                }

                //登录名正则表达式

                var reName = new RegExp("^[a-zA-Z0-9]{6,12}$");

                if (!reName.test(loginName)) {
                    layer.open({

                        title: '温馨提示',
                        content: '登录名由6到12位的字母，数字组成',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();

                        }

                    });
                    return;
                }

                if (userNum == "") {
                    layer.open({

                        title: '温馨提示',
                        content: '编号不能为空',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();

                        }

                    });
                    return;
                }

                var rePwd = new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,12}$");

                if (loginPwd == "") {
                    layer.open({

                        title: '温馨提示',
                        content: '密码不能为空',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();

                        }

                    });
                    return;
                }

                if (!rePwd.test(loginPwd)) {
                    layer.open({

                        title: '温馨提示',
                        content: '密码必须是字母和数字，长度为6到12位组成',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();

                        }

                    });
                    return;
                }

                if (userTel == "") {
                    layer.open({

                        title: '温馨提示',
                        content: '电话号码不能为空',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();

                        }

                    });
                    return;
                }

                var reTel = new RegExp("[0-9]{11}");

                if (!reTel.test(userTel)) {
                    layer.open({

                        title: '温馨提示',
                        content: '请输入正确的手机号',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();

                        }

                    });
                    return;
                }

                if (userEmail == "") {
                    layer.open({
                        title: '温馨提示',
                        content: '邮箱不能为空！',
                        btn: ['确定'],
                        yes: function () {

                            layer.closeAll();
                        }
                    });
                    return;
                }

                var reEmail = new RegExp("^([a-zA-Z0-9_\.\-])+@@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})$");
                if (!reEmail.test(userEmail)) {
                    layer.open({
                        title: '温馨提示',
                        content: '请输入正确邮箱格式',
                        btn: ['确定'],
                        yes: function () {
                            layer.closeAll();
                        }
                    });
                    return;
                }

                if (userXue == "") {
                    layer.open({
                        title: '温馨提示',
                        content: '学历不能为空!',
                        btn: '确定',
                        yes: function () {

                            layer.closeAll();
                        }
                    });
                    return;
                }


                //序列化表单

                var fromdata = $("#form-article-add").serializeArray();

             


                //解析成字符串

                var jonstr = "{";

                for (var i = 0; i < fromdata.length; i++) {

                    jonstr += "\"" + fromdata[i].name + "\":\"" + fromdata[i].value + "\"";

                    if (i != fromdata.length - 1) {
                        jonstr += ",";
                    }

                }


                jonstr += "}";

             

                $.ajax({

                    url: '/Employ/addemploy',
                    type: 'post',
                    data:{jonstr:jonstr},
                    success: function (result1) {

                        if (result1.message == "success")
                        {
                            layer.open({
                                title: '温馨提示',
                                content: '入职成功',
                                btn: ['确定'],
                                yes: function () {

                                    layer.closeAll();

                                }

                            });
                        }

                        if (result1.message == "failure")
                        {
                            layer.open({
                                title: '温馨提示',
                                content: '登录名或编号重复',
                                btn: ['确定'],
                                yes: function () {

                                    layer.closeAll();

                                }

                            });
                        }

                    }

                });

                


            });

            //绑定下拉列表框
            $.ajax({

                url: '/employ/adddepartment',
                type: 'get',
                success: function (result) {

                    if (result.message == "success")
                    {
                        var content = "";
                        content += "<option value='-1'>请选择</option>";
                        for (var i = 0; i < result.data.length; i++)
                        {
                            
                            content += "<option value='" + result.data[i].DepartId + "'>" + result.data[i].DepartmentName + "</option>";
                        }

                        $("#BuMenId").html(content);
                    }

                }

            });


            //给职位的下列表框添加内容
            $.ajax({

                url: '/employ/addPositionInfo',
                type: 'get',
                success: function (resultdate) {

                    if (resultdate.message == "success")
                    {
                       
                        var content = "";
                        content += "<option value='-1'>请选择</option>";
                        for (var i = 0; i < resultdate.data.length; i++) {

                            content += "<option value='" + resultdate.data[i].PositionId + "'>" + resultdate.data[i].PositionName + "</option>";

                        }

                        $("#ZhiWeiId").html(content);
                    }

                }

            });

        });

    </script>
   

  </body>